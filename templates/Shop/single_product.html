{% extends 'base.html' %}
{% load static %}
{% block title %} Single Product {% endblock %}
{% block body %}



            <!-- content-wraper start -->
            <div class="content-wraper">
                <div class="container">
                    <div class="row single-product-area">
                        <div class="col-lg-5 col-md-6">
                           <!-- Product Details Left -->
                            <div class="product-details-left">
                                <div class="product-details-images slider-navigation-1">
                                    <div class="lg-image">
                                        <img src="{{ single_product.image1.url}}" alt="product image">
                                    </div>
                                    <div class="lg-image">
                                        <img src="{{ single_product.image2.url}}" alt="product image">
                                    </div>
                                    <div class="lg-image">
                                        <img src="{{ single_product.image3.url}}" alt="product image">
                                    </div>
                                    <div class="lg-image">
                                        <img src="{{ single_product.image1.url}}" alt="product image">
                                    </div>
                                    <div class="lg-image">
                                        <img src="{{ single_product.image2.url}}" alt="product image">
                                    </div>
                                    <div class="lg-image">
                                        <img src="{{ single_product.image3.url}}" alt="product image">
                                    </div>
                                </div>
                                <div class="product-details-thumbs slider-thumbs-1">
                                    <div class="sm-image"><img style="height:150px;width:150px"  src="{{ single_product.image1.url}}" alt="product image thumb"></div>
                                    <div class="sm-image"><img style="height:150px;width:150px"  src="{{ single_product.image2.url}}" alt="product image thumb"></div>
                                    <div class="sm-image"><img style="height:150px;width:150px"  src="{{ single_product.image3.url}}" alt="product image thumb"></div>
                                    <div class="sm-image"><img style="height:150px;width:150px"  src="{{ single_product.image1.url}}" alt="product image thumb"></div>
                                    <div class="sm-image"><img style="height:150px;width:150px"  src="{{ single_product.image2.url}}" alt="product image thumb"></div>
                                    <div class="sm-image"><img style="height:150px;width:150px"  src="{{ single_product.image3.url}}" alt="product image thumb"></div>
                                </div>
                            </div>
                            <!--// Product Details Left -->
                        </div>

                        <div class="col-lg-7 col-md-6">
                            <div class="product-details-view-content sp-normal-content pt-60">
                                <div class="product-info">
                                    <h2>{{single_product.title}}</h2>
                                    <span class="product-details-ref"></span>
                                    <div class="price-box pt-20">
                                        <span class="new-price new-price-2">{{single_product.price}}</span>
                                    </div>
                                    <div class="product-desc">
                                        <p>
                                            <span>{{single_product.description}}
                                            </span>
                                        </p>
                                    </div>

                                     <!-- Add dropdown menus for color and size -->
                                    <form action="{% if user.is_authenticated %}{% url 'addtocart' single_product.id %}
                                    {% else %}
                                    {% url 'Log_in' %}{% endif %}" method="post" >
                                        {% csrf_token %}
                                        <div class="product-variants">
                                            <div class="row">
                                                <div class="col-md-2">
                                                    <div class="product-variants-size">
                                                        <label for="size-select">Size</label>
                                                        <select id="size-select" name="size" class="nice-select">
                                                            {% for variation in single_product.variation_set.all %}
                                                                {% if variation.size %}
                                                                    <option value="{{ variation.size }}">{{ variation.get_size_display }}</option>
                                                                {% else %}
                                                                    <option value="">No size available</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="product-variants-color">
                                                        <label for="color-select">Color</label>
                                                        <select name="color" id="color-select" class="nice-select">
                                                            {% for variation in single_product.variation_set.all %}
                                                                {% if variation.color %}
                                                                    <option value="{{ variation.color }}">{{ variation.get_color_display }}</option>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="cart-quantity" >
                                            <div class="quantity">
                                                <label>Quantity</label>
                                                <div class="cart-plus-minus">
                                                    <input class="cart-plus-minus-box" name="quantity" value="1" type="text">
                                                    <div class="dec qtybutton"><i class="fa fa-angle-down"></i></div>
                                                    <div class="inc qtybutton"><i class="fa fa-angle-up"></i></div>
                                                </div>
                                            </div>
                                            <button class="add-to-cart" type="submit">Add to cart</button>
                                            <button class="add-to-cart" type="submit">Shop Now</button>
                                        </div>
                                    </form>
                                    <!-- End of add-to-cart form -->
                                    <div class="product-additional-info">
                                        <div class="product-social-sharing">
                                            <ul>
                                                <li class="facebook"><a href="#"><i class="fa fa-facebook"></i>Facebook</a></li>
                                                <li class="twitter"><a href="#"><i class="fa fa-twitter"></i>Twitter</a></li>
                                                <li class="google-plus"><a href="#"><i class="fa fa-google-plus"></i>Google +</a></li>
                                                <li class="instagram"><a href="#"><i class="fa fa-instagram"></i>Instagram</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- content-wraper end -->
            <!-- Begin Product Area -->
            <div class="product-area pt-40">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="li-product-tab">
                                <ul class="nav li-product-menu">
                                   <li><a class="active" data-toggle="tab" href="{{single_product.description}}"><span>Description</span></a></li>
                                   <li><a data-toggle="tab" href="#product-details"><span>Product Details</span></a></li>
<!--                                   <li><a data-toggle="tab" href="#reviews"><span>Reviews</span></a></li>-->
                                </ul>
                            </div>
                            <!-- Begin Li's Tab Menu Content Area -->
                        </div>
                    </div>
                    <div class="tab-content">
                        <div id="description" class="tab-pane active show" role="tabpanel">
                            <div class="product-description">
                                <span>{{single_product.description}}</span>
                            </div>
                        </div>
                        <div id="product-details" class="tab-pane" role="tabpanel">
                            <div class="product-details-manufacturer">
                                <a href="#">
                                    <img src="{{ single_product.image1.url}}" alt="Product Manufacturer Image">
                                </a>
                                <p><span>Name</span>{{single_product.title}}</p>
                                <p><span>Description</span>{{single_product.description}}</p>
                            </div>
                        </div>
                            </div>
                    </div>
                </div>

            <!-- Product Area End Here -->
            <!-- Begin Quick View | Modal Area -->
            <div class="modal fade modal-wrapper" id="exampleModalCenter" >
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            <div class="modal-inner-area row">
                                <div class="col-lg-5 col-md-6 col-sm-6">
                                   <!-- Product Details Left -->
                                    <div class="product-details-left">
                                        <div class="product-details-images slider-navigation-1">
                                            <div class="lg-image">
                                                <img src="{{ single_product.image1.url}}" alt="product image">
                                            </div>
                                            <div class="lg-image">
                                                <img src="{{ single_product.image2.url}}" alt="product image">
                                            </div>
                                            <div class="lg-image">
                                                <img src="{{ single_product.image3.url}}" alt="product image">
                                            </div>
                                            <div class="lg-image">
                                                <img src="{{ single_product.image1.url}}" alt="product image">
                                            </div>
                                            <div class="lg-image">
                                                <img src="{{ single_product.image2.url}}" alt="product image">
                                            </div>
                                            <div class="lg-image">
                                                <img src="{{ single_product.image3.url}}" alt="product image">
                                            </div>
                                        </div>
                                        <div class="product-details-thumbs slider-thumbs-1">
                                            <div class="sm-image"><img src="{{ single_product.image1.url}}" alt="product image thumb"></div>
                                            <div class="sm-image"><img src="{{ single_product.image2.url}}" alt="product image thumb"></div>
                                            <div class="sm-image"><img src="{{ single_product.image3.url}}" alt="product image thumb"></div>
                                            <div class="sm-image"><img src="{{ single_product.image1.url}}" alt="product image thumb"></div>
                                            <div class="sm-image"><img src="{{ single_product.image2.url}}" alt="product image thumb"></div>
                                            <div class="sm-image"><img src="{{ single_product.image3.url}}" alt="product image thumb"></div>
                                        </div>
                                    </div>
                                    <!--// Product Details Left -->
                                </div>

                                <div class="col-lg-7 col-md-6 col-sm-6">
                                    <div class="product-details-view-content pt-60">
                                        <div class="product-info">
                                            <h2>Today is a good day Framed poster</h2>
                                            <span class="product-details-ref">Reference: demo_15</span>
                                            <div class="rating-box pt-20">
                                                <ul class="rating rating-with-review-item">
                                                    <li><i class="fa fa-star-o"></i></li>
                                                    <li><i class="fa fa-star-o"></i></li>
                                                    <li><i class="fa fa-star-o"></i></li>
                                                    <li class="no-star"><i class="fa fa-star-o"></i></li>
                                                    <li class="no-star"><i class="fa fa-star-o"></i></li>
                                                    <li class="review-item"><a href="#">Read Review</a></li>
                                                    <li class="review-item"><a href="#">Write Review</a></li>
                                                </ul>
                                            </div>
                                            <div class="price-box pt-20">
                                                <span class="new-price new-price-2">$57.98</span>
                                            </div>
                                            <div class="product-desc">
                                                <p>
                                                    <span>100% cotton double printed dress. Black and white striped top and orange high waisted skater skirt bottom. Lorem ipsum dolor sit amet, consectetur adipisicing elit. quibusdam corporis, earum facilis et nostrum dolorum accusamus similique eveniet quia pariatur.
                                                    </span>
                                                </p>
                                            </div>
                                            <div class="product-variants">
                                                <div class="produt-variants-size">
                                                    <label>Dimension</label>
                                                    <select class="nice-select">
                                                        <option value="1" title="S" selected="selected">40x60cm</option>
                                                        <option value="2" title="M">60x90cm</option>
                                                        <option value="3" title="L">80x120cm</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="product-additional-info pt-25">
                                                <a class="wishlist-btn" href="wishlist.html"><i class="fa fa-heart-o"></i>Add to wishlist</a>
                                                <div class="product-social-sharing pt-25">
                                                    <ul>
                                                        <li class="facebook"><a href="#"><i class="fa fa-facebook"></i>Facebook</a></li>
                                                        <li class="twitter"><a href="#"><i class="fa fa-twitter"></i>Twitter</a></li>
                                                        <li class="google-plus"><a href="#"><i class="fa fa-google-plus"></i>Google +</a></li>
                                                        <li class="instagram"><a href="#"><i class="fa fa-instagram"></i>Instagram</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Quick View | Modal Area End Here -->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function(){
        // Increment and Decrement quantity
        $('.qtybutton').on('click', function() {
            var $button = $(this);
            var $input = $button.parent().find('input');
            var oldValue = parseInt($input.val());
            var newVal;
            if ($button.hasClass('inc')) {
                newVal = oldValue + 1;
            } else {
                // Don't allow decrementing below one
                newVal = oldValue > 1 ? oldValue - 1 : 1;
            }
            $input.val(newVal);

            // Trigger form submission when quantity changes
            $input.trigger('change');
        });

        // Function to update total price based on quantity
        function updateTotalPrice() {
            var quantity = parseInt($('.cart-plus-minus-box').val());
            var unitPrice = parseFloat($('.new-price').text());
            var totalPrice = quantity * unitPrice;
            $('.product-subtotal .amount').text(totalPrice.toFixed(2));
        }

        // Call the function initially to set the total price
        updateTotalPrice();

        // Handle change event of quantity input
        $('.cart-plus-minus-box').on('change', function() {
            updateTotalPrice();
        });
    });
</script>

{% endblock %}